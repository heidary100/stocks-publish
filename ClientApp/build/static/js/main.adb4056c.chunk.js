(this.webpackJsonpkhosravi_webapi_react=this.webpackJsonpkhosravi_webapi_react||[]).push([[0],{100:function(e,t,r){},143:function(e,t,r){},145:function(e,t,r){"use strict";r.r(t);r(89);var n=r(1),a=r.n(n),c=r(31),s=r.n(c),i=r(22),o=r(10),u=r(11),l=r(13),h=r(12),b=r(6),d=r(152),p=r(35),j=r(151),f=r(153),v=r(154),g=r(162),x=r(149),O=r(150),m=r(4),k=r.n(m),w=r(85),y=r(14),S=r(58),A="khosravi_webapi_react",C="returnUrl",R="message",U="logout-callback",I="logout",_="logged-out",T="login",M="login-callback",L="login-failed",P="profile",N="register",E="/authentication",z={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:"/_configuration/".concat(A),ApiAuthorizationPrefix:E,Login:"".concat(E,"/").concat(T),LoginFailed:"".concat(E,"/").concat(L),LoginCallback:"".concat(E,"/").concat(M),Register:"".concat(E,"/").concat(N),Profile:"".concat(E,"/").concat(P),LogOut:"".concat(E,"/").concat(I),LoggedOut:"".concat(E,"/").concat(_),LogOutCallback:"".concat(E,"/").concat(U),IdentityRegisterPath:"/Identity/Account/Register",IdentityManagePath:"/Identity/Account/Manage"},F=function(){function e(){Object(o.a)(this,e),this._callbacks=[],this._nextSubscriptionId=0,this._user=null,this._isAuthenticated=!1,this._popUpDisabled=!0}return Object(u.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._user||!this._user.profile){e.next=2;break}return e.abrupt("return",this._user.profile);case 2:return e.next=4,this.ensureUserManagerInitialized();case 4:return e.next=6,this.userManager.getUser();case 6:return t=e.sent,e.abrupt("return",t&&t.profile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.next=4,this.userManager.getUser();case 4:return t=e.sent,e.abrupt("return",t&&t.access_token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(y.a)(k.a.mark((function e(t){var r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signinSilent(this.createArguments());case 5:return r=e.sent,this.updateState(r),e.abrupt("return",this.success(t));case 10:if(e.prev=10,e.t0=e.catch(2),console.log("Silent authentication error: ",e.t0),e.prev=13,!this._popUpDisabled){e.next=16;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 16:return e.next=18,this.userManager.signinPopup(this.createArguments());case 18:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(t));case 23:if(e.prev=23,e.t1=e.catch(13),"Popup window closed"!==e.t1.message){e.next=29;break}return e.abrupt("return",this.error("The user closed the window."));case 29:this._popUpDisabled||console.log("Popup authentication error: ",e.t1);case 30:return e.prev=30,e.next=33,this.userManager.signinRedirect(this.createArguments(t));case 33:return e.abrupt("return",this.redirect());case 36:return e.prev=36,e.t2=e.catch(30),console.log("Redirect authentication error: ",e.t2),e.abrupt("return",this.error(e.t2));case 40:case"end":return e.stop()}}),e,this,[[2,10],[13,23],[30,36]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignIn",value:function(){var e=Object(y.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ensureUserManagerInitialized();case 3:return e.next=5,this.userManager.signinCallback(t);case 5:return r=e.sent,this.updateState(r),e.abrupt("return",this.success(r&&r.state));case 10:return e.prev=10,e.t0=e.catch(0),console.log("There was an error signing in: ",e.t0),e.abrupt("return",this.error("There was an error signing in."));case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:if(e.prev=2,!this._popUpDisabled){e.next=5;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 5:return e.next=7,this.userManager.signoutPopup(this.createArguments());case 7:return this.updateState(void 0),e.abrupt("return",this.success(t));case 11:return e.prev=11,e.t0=e.catch(2),console.log("Popup signout error: ",e.t0),e.prev=14,e.next=17,this.userManager.signoutRedirect(this.createArguments(t));case 17:return e.abrupt("return",this.redirect());case 20:return e.prev=20,e.t1=e.catch(14),console.log("Redirect signout error: ",e.t1),e.abrupt("return",this.error(e.t1));case 24:case"end":return e.stop()}}),e,this,[[2,11],[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignOut",value:function(){var e=Object(y.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signoutCallback(t);case 5:return r=e.sent,this.updateState(null),e.abrupt("return",this.success(r&&r.data));case 10:return e.prev=10,e.t0=e.catch(2),console.log("There was an error trying to log out '".concat(e.t0,"'.")),e.abrupt("return",this.error(e.t0));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){this._user=e,this._isAuthenticated=!!this._user,this.notifySubscribers()}},{key:"subscribe",value:function(e){return this._callbacks.push({callback:e,subscription:this._nextSubscriptionId++}),this._nextSubscriptionId-1}},{key:"unsubscribe",value:function(e){var t=this._callbacks.map((function(t,r){return t.subscription===e?{found:!0,index:r}:{found:!1}})).filter((function(e){return!0===e.found}));if(1!==t.length)throw new Error("Found an invalid number of subscriptions ".concat(t.length));this._callbacks.splice(t[0].index,1)}},{key:"notifySubscribers",value:function(){for(var e=0;e<this._callbacks.length;e++){(0,this._callbacks[e].callback)()}}},{key:"createArguments",value:function(e){return{useReplaceToNavigate:!0,data:e}}},{key:"error",value:function(e){return{status:B.Fail,message:e}}},{key:"success",value:function(e){return{status:B.Success,state:e}}},{key:"redirect",value:function(){return{status:B.Redirect}}},{key:"ensureUserManagerInitialized",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,r,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.userManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(z.ApiAuthorizationClientConfigurationUrl);case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Could not load settings for '".concat(A,"'"));case 7:return e.next=9,t.json();case 9:(r=e.sent).automaticSilentRenew=!0,r.includeIdTokenInSilentRenew=!0,r.userStore=new S.WebStorageStateStore({prefix:A}),this.userManager=new S.UserManager(r),this.userManager.events.addUserSignedOut(Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.userManager.removeUser();case 2:n.updateState(void 0);case 3:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"instance",get:function(){return D}}]),e}(),D=new F,W=D,B={Redirect:"redirect",Success:"success",Fail:"fail"},V=r(2),Y=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={isAuthenticated:!1,userName:null},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.populateState()})),this.populateState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"populateState",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,r,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([W.isAuthenticated(),W.getUser()]);case 2:t=e.sent,r=Object(w.a)(t,2),n=r[0],a=r[1],this.setState({isAuthenticated:n,userName:a&&a.name});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,r=e.userName;if(t){var n="".concat(z.Profile),a={pathname:"".concat(z.LogOut),state:{local:!0}};return this.authenticatedView(r,n,a)}var c="".concat(z.Register),s="".concat(z.Login);return this.anonymousView(c,s)}},{key:"authenticatedView",value:function(e,t,r){return Object(V.jsxs)(n.Fragment,{children:[Object(V.jsx)(x.a,{children:Object(V.jsxs)(O.a,{tag:i.b,className:"text-dark",to:t,children:["Hello ",e]})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:r,children:"Logout"})})]})}},{key:"anonymousView",value:function(e,t){return Object(V.jsxs)(n.Fragment,{children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:e,children:"Register"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:t,children:"Login"})})]})}}]),r}(n.Component),H=(r(100),function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).toggleNavbar=n.toggleNavbar.bind(Object(p.a)(n)),n.state={collapsed:!0},n}return Object(u.a)(r,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return Object(V.jsx)("header",{children:Object(V.jsx)(j.a,{className:"navbar-expand-sm navbar-toggleable-sm ng-white border-bottom box-shadow mb-3",light:!0,children:Object(V.jsxs)(d.a,{children:[Object(V.jsx)(f.a,{tag:i.b,to:"/",children:"khosravi_webapi_react"}),Object(V.jsx)(v.a,{onClick:this.toggleNavbar,className:"mr-2"}),Object(V.jsx)(g.a,{className:"d-sm-inline-flex flex-sm-row-reverse",isOpen:!this.state.collapsed,navbar:!0,children:Object(V.jsxs)("ul",{className:"navbar-nav flex-grow",children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:"/",children:"Home"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:"/counter",children:"Counter"})}),Object(V.jsx)(x.a,{children:Object(V.jsx)(O.a,{tag:i.b,className:"text-dark",to:"/fetch-data",children:"Fetch data"})}),Object(V.jsx)(Y,{})]})})]})})})}}]),r}(n.Component));H.displayName=H.name;var J=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(H,{}),Object(V.jsx)(d.a,{children:this.props.children})]})}}]),r}(n.Component);J.displayName=J.name;var X=r(25),q=r(159),G=r(61),K=r(84),Q=r(60),Z=r(51),$=r(5),ee=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.type,r=e.width,n=e.data,a=e.ratio,c=function(e){return e.date},s=[c(Object($.last)(n)),c(n[n.length-100])];return Object(V.jsx)(G.b,{height:400,ratio:a,width:r,margin:{left:50,right:50,top:10,bottom:30},type:t,seriesName:"MSFT",data:n,xAccessor:c,xScale:Object(X.scaleTime)(),xExtents:s,children:Object(V.jsxs)(G.a,{id:1,yExtents:function(e){return[e.high,e.low]},children:[Object(V.jsx)(Q.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),Object(V.jsx)(Q.YAxis,{axisAt:"left",orient:"left",ticks:5}),Object(V.jsx)(K.CandlestickSeries,{width:Object($.timeIntervalBarWidth)(q.a)})]})})}}]),r}(a.a.Component);ee.defaultProps={type:"svg"};var te=ee=Object(Z.fitWidth)(ee),re=r(164),ne=r(163);var ae=Object(ne.b)("%Y-%m-%d");var ce=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/MSFT.tsv").then((function(e){return e.text()})).then((function(e){return Object(re.a)(e,(t=ae,function(e){return e.date=t(e.date),e.open=+e.open,e.high=+e.high,e.low=+e.low,e.close=+e.close,e.volume=+e.volume,e}));var t})).then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){var e=this;return null==this.state?Object(V.jsx)("div",{children:"Loading..."}):Object(V.jsx)(Z.TypeChooser,{children:function(t){return Object(V.jsx)(te,{type:t,data:e.state.data})}})}}]),r}(n.Component);ce.displayName=ce.name;var se=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={forecasts:[],loading:!0},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.populateWeatherData()}},{key:"render",value:function(){var e=this.state.loading?Object(V.jsx)("p",{children:Object(V.jsx)("em",{children:"Loading..."})}):r.renderForecastsTable(this.state.forecasts);return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{id:"tabelLabel",children:"Weather forecast"}),Object(V.jsx)("p",{children:"This component demonstrates fetching data from the server."}),e]})}},{key:"populateWeatherData",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAccessToken();case 2:return t=e.sent,e.next=5,fetch("weatherforecast",{headers:t?{Authorization:"Bearer ".concat(t)}:{}});case 5:return r=e.sent,e.next=8,r.json();case 8:n=e.sent,this.setState({forecasts:n,loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"renderForecastsTable",value:function(e){return Object(V.jsxs)("table",{className:"table table-striped","aria-labelledby":"tabelLabel",children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"Date"}),Object(V.jsx)("th",{children:"Temp. (C)"}),Object(V.jsx)("th",{children:"Temp. (F)"}),Object(V.jsx)("th",{children:"Summary"})]})}),Object(V.jsx)("tbody",{children:e.map((function(e){return Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:e.date}),Object(V.jsx)("td",{children:e.temperatureC}),Object(V.jsx)("td",{children:e.temperatureF}),Object(V.jsx)("td",{children:e.summary})]},e.date)}))})]})}}]),r}(n.Component);se.displayName=se.name;var ie=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={currentCount:0},n.incrementCounter=n.incrementCounter.bind(Object(p.a)(n)),n}return Object(u.a)(r,[{key:"incrementCounter",value:function(){this.setState({currentCount:this.state.currentCount+1})}},{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Counter"}),Object(V.jsx)("p",{children:"This is a simple example of a React component."}),Object(V.jsxs)("p",{"aria-live":"polite",children:["Current count: ",Object(V.jsx)("strong",{children:this.state.currentCount})]}),Object(V.jsx)("button",{className:"btn btn-primary",onClick:this.incrementCounter,children:"Increment"})]})}}]),r}(n.Component);ie.displayName=ie.name;var oe=r(54),ue=r(86),le=["component"],he=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={ready:!1,authenticated:!1},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,r=e.authenticated,n=document.createElement("a");n.href=this.props.path;var a="".concat(n.protocol,"//").concat(n.host).concat(n.pathname).concat(n.search).concat(n.hash),c="".concat(z.Login,"?").concat(C,"=").concat(encodeURI(a));if(t){var s=this.props,i=s.component,o=Object(ue.a)(s,le);return Object(V.jsx)(b.b,Object(oe.a)(Object(oe.a)({},o),{},{render:function(e){return r?Object(V.jsx)(i,Object(oe.a)({},e)):Object(V.jsx)(b.a,{to:c})}}))}return Object(V.jsx)("div",{})}},{key:"populateAuthenticationState",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({ready:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(n.Component),be=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={message:void 0},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case T:this.login(this.getReturnUrl());break;case M:this.processLoginCallback();break;case L:var t=new URLSearchParams(window.location.search).get(R);this.setState({message:t});break;case P:this.redirectToProfile();break;case N:this.redirectToRegister();break;default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"render",value:function(){var e=this.props.action,t=this.state.message;if(t)return Object(V.jsx)("div",{children:t});switch(e){case T:return Object(V.jsx)("div",{children:"Processing login"});case M:return Object(V.jsx)("div",{children:"Processing login callback"});case P:case N:return Object(V.jsx)("div",{});default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"login",value:function(){var e=Object(y.a)(k.a.mark((function e(t){var r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={returnUrl:t},e.next=3,W.signIn(r);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:case 10:return e.abrupt("break",14);case 8:return e.next=10,this.navigateToReturnUrl(t);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid status result ".concat(n.status,"."));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLoginCallback",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignIn(t);case 3:r=e.sent,e.t0=r.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(r.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:r.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status '".concat(r.status,"'."));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(C);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin,"/")}},{key:"redirectToRegister",value:function(){this.redirectToApiAuthorizationPath("".concat(z.IdentityRegisterPath,"?").concat(C,"=").concat(encodeURI(z.Login)))}},{key:"redirectToProfile",value:function(){this.redirectToApiAuthorizationPath(z.IdentityManagePath)}},{key:"redirectToApiAuthorizationPath",value:function(e){var t="".concat(window.location.origin).concat(e);window.location.replace(t)}},{key:"navigateToReturnUrl",value:function(e){window.location.replace(e)}}]),r}(n.Component),de=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={message:void 0,isReady:!1,authenticated:!1},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case I:window.history.state.state.local?this.logout(this.getReturnUrl()):this.setState({isReady:!0,message:"The logout was not initiated from within the page."});break;case U:this.processLogoutCallback();break;case _:this.setState({isReady:!0,message:"You successfully logged out!"});break;default:throw new Error("Invalid action '".concat(e,"'"))}this.populateAuthenticationState()}},{key:"render",value:function(){var e=this.state,t=e.isReady,r=e.message;if(!t)return Object(V.jsx)("div",{});if(r)return Object(V.jsx)("div",{children:r});var n=this.props.action;switch(n){case I:return Object(V.jsx)("div",{children:"Processing logout"});case U:return Object(V.jsx)("div",{children:"Processing logout callback"});case _:return Object(V.jsx)("div",{children:r});default:throw new Error("Invalid action '".concat(n,"'"))}}},{key:"logout",value:function(){var e=Object(y.a)(k.a.mark((function e(t){var r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={returnUrl:t},e.next=3,W.isAuthenticated();case 3:if(!e.sent){e.next=20;break}return e.next=7,W.signOut(r);case 7:n=e.sent,e.t0=n.status,e.next=e.t0===B.Redirect?11:e.t0===B.Success?12:e.t0===B.Fail?15:17;break;case 11:return e.abrupt("break",18);case 12:return e.next=14,this.navigateToReturnUrl(t);case 14:return e.abrupt("break",18);case 15:return this.setState({message:n.message}),e.abrupt("break",18);case 17:throw new Error("Invalid authentication result status.");case 18:e.next=21;break;case 20:this.setState({message:"You successfully logged out!"});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLogoutCallback",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignOut(t);case 3:r=e.sent,e.t0=r.status,e.next=e.t0===B.Redirect?7:e.t0===B.Success?8:e.t0===B.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(r.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:r.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status.");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateAuthenticationState",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({isReady:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(C);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin).concat(z.LoggedOut)}},{key:"navigateToReturnUrl",value:function(e){return window.location.replace(e)}}]),r}(n.Component),pe=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(V.jsxs)(n.Fragment,{children:[Object(V.jsx)(b.b,{path:z.Login,render:function(){return je(T)}}),Object(V.jsx)(b.b,{path:z.LoginFailed,render:function(){return je(L)}}),Object(V.jsx)(b.b,{path:z.LoginCallback,render:function(){return je(M)}}),Object(V.jsx)(b.b,{path:z.Profile,render:function(){return je(P)}}),Object(V.jsx)(b.b,{path:z.Register,render:function(){return je(N)}}),Object(V.jsx)(b.b,{path:z.LogOut,render:function(){return fe(I)}}),Object(V.jsx)(b.b,{path:z.LogOutCallback,render:function(){return fe(U)}}),Object(V.jsx)(b.b,{path:z.LoggedOut,render:function(){return fe(_)}})]})}}]),r}(n.Component);function je(e){return Object(V.jsx)(be,{action:e})}function fe(e){return Object(V.jsx)(de,{action:e})}r(143);var ve=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(V.jsxs)(J,{children:[Object(V.jsx)(b.b,{exact:!0,path:"/",component:ce}),Object(V.jsx)(b.b,{path:"/counter",component:ie}),Object(V.jsx)(he,{path:"/fetch-data",component:se}),Object(V.jsx)(b.b,{path:z.ApiAuthorizationPrefix,component:pe})]})}}]),r}(n.Component);ve.displayName=ve.name;var ge=document.getElementsByTagName("base")[0].getAttribute("href"),xe=document.getElementById("root");s.a.render(Object(V.jsx)(i.a,{basename:ge,children:Object(V.jsx)(ve,{})}),xe)}},[[145,1,2]]]);
//# sourceMappingURL=main.adb4056c.chunk.js.map